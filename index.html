<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quizzehn</title>
  <!-- Montserrat von Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background-color: #4b4b4b;
      font-family: 'Montserrat', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }
    .container {
      width: 320px;
      height: 600px;
      background: #000;
      border-radius: 30px;
      padding: 20px;
      box-sizing: border-box;
      position: relative;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0,0,0,0.4);
    }
    .card {
      position: absolute;
      top: 20px; left: 20px;
      right: 20px; bottom: 80px;
      background: #f4a300;
      border-radius: 20px;
      padding: 20px;
      box-sizing: border-box;
      color: #fff;
      text-align: center;
      font-size: 18px;
      font-weight: 600;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      transform: translateY(0);
      transition: transform 0.5s ease, opacity 0.5s ease;
      z-index: 2;
    }
    .card.slide-out {
      /* transform entfernt, wir nutzen inline-transform f체r Richtung */
      opacity: 0;
    }
    .question {
      margin-bottom: 16px;
      font-size: 20px;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      text-align: left;
      width: 100%;
      flex-grow: 1;
      overflow-y: auto;
    }
    li {
      margin: 6px 0;
      font-weight: 400;
      font-size: 16px;
      padding-left: 10px;
    }
  </style>
</head>
<body>
  <div class="container" id="container"></div>

  <!-- Externe JS-Datei mit deinen Fragen & Antworten -->
  <script src="quizzehn_cards.js"></script>
  <script>
    const container = document.getElementById('container');
    let currentIndex = -1;

    function makeCard(idx) {
      const c = cards[idx];
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <div class="question">${c.question}</div>
        <ul>${c.answers.map(a => `<li>${a}</li>`).join('')}</ul>
      `;
      attachDrag(card);
      return card;
    }

    function initStack() {
      const first  = getNextIndex();
      const second = getNextIndex();
      const under  = makeCard(second);
      under.style.zIndex = 1;
      const top    = makeCard(first);
      top.style.zIndex = 2;
      container.appendChild(under);
      container.appendChild(top);
      currentIndex = first;
    }

    function loadNext() {
      const newIdx  = getNextIndex();
      const newCard = makeCard(newIdx);
      newCard.style.zIndex = 1;
      // alle vorhandenen Karten eine Ebene nach oben
      container.querySelectorAll('.card').forEach(c => {
        c.style.zIndex = parseInt(c.style.zIndex) + 1;
      });
      container.appendChild(newCard);
    }

    function getNextIndex() {
      let idx;
      do { idx = Math.floor(Math.random() * cards.length); }
      while (idx === currentIndex);
      currentIndex = idx;
      return idx;
    }

    function attachDrag(card) {
      let startX, startY, dx = 0, dy = 0, dragging = false;
      const threshold = 100;

      card.addEventListener('pointerdown', e => {
        dragging = true;
        startX = e.clientX;
        startY = e.clientY;
        card.setPointerCapture(e.pointerId);
        card.style.transition = ''; // Transition w채hrend Drag aus
      });

      card.addEventListener('pointermove', e => {
        if (!dragging) return;
        dx = e.clientX - startX;
        dy = e.clientY - startY;
        card.style.transform = `translate(${dx}px, ${dy}px) rotate(${dx * 0.05}deg)`;
      });

      card.addEventListener('pointerup', e => {
        if (!dragging) return;
        dragging = false;
        card.releasePointerCapture(e.pointerId);
        if (Math.abs(dx) > threshold || Math.abs(dy) > threshold) {
          // Ausblenden und n채chste laden
          card.classList.add('slide-out');
          card.style.transform = `translate(${dx * 2}px, ${dy * 2}px)`;
          setTimeout(() => {
            card.remove();
            loadNext();
          }, 500);
        } else {
          // zur체ck zur Mitte
          card.style.transition = 'transform 0.3s ease';
          card.style.transform = 'translate(0, 0)';
        }
      });
    }

    initStack();
  </script>
</body>
</html>
